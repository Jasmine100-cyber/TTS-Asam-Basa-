<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TTS Asam Basa Challenge</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(#fce4ec, #e3f2fd);
      text-align: center;
      padding: 20px;
    }
    .screen {
      display: none;
    }
    .active {
      display: block;
    }
    .button {
      padding: 10px 20px;
      margin: 10px;
      font-size: 16px;
      cursor: pointer;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(6, 40px);
      justify-content: center;
      margin: 20px auto;
    }
    .cell {
      border: 1px solid #000;
      width: 40px;
      height: 40px;
      text-align: center;
      font-size: 18px;
    }
    .correct {
      background-color: #a5d6a7;
    }
    .incorrect {
      background-color: #ef9a9a;
    }
    .clues {
      text-align: left;
      max-width: 600px;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <div id="startScreen" class="screen active">
    <h1>TTS Asam Basa Challenge: Teka Teki Seru!</h1>
    <button class="button" onclick="showScreen('instructionScreen')">Cara Bermain</button>
    <button class="button" onclick="startGame()">Mulai</button>
    <button class="button" onclick="alert('Terima kasih telah bermain!')">Keluar</button>
  </div>

  <div id="instructionScreen" class="screen">
    <h2>Petunjuk Permainan</h2>
    <p>Isi kotak teka-teki silang berdasarkan petunjuk soal.</p>
    <p>Jawaban harus sesuai dengan konsep asam basa.</p>
    <p>Durasi permainan: 3 menit.</p>
    <p>Gunakan fitur "Hint" maksimal 3 kali.</p>
    <p>Skor dihitung dari jawaban benar + bonus waktu.</p>
    <button class="button" onclick="showScreen('startScreen')">Kembali ke Menu</button>
    <button class="button" onclick="startGame()">Mulai Bermain</button>
  </div>

  <div id="gameScreen" class="screen">
    <h2>Teka-Teki Silang Asam Basa</h2>
    <div class="grid" id="grid"></div>
    <div class="clues">
      <h3>Petunjuk:</h3>
      <p><strong>Horizontal:</strong></p>
      <ul>
        <li>1. Senyawa yang melepaskan ion H+ dalam air</li>
        <li>3. Alat pengukur keasaman</li>
        <li>4. Rentang nilai pH 0-14</li>
        <li>5. Produk reaksi asam dan basa</li>
      </ul>
      <p><strong>Vertikal:</strong></p>
      <ul>
        <li>2. Senyawa yang melepaskan ion OH- dalam air</li>
      </ul>
    </div>
    <div>
      <button class="button" onclick="useHint()">Hint (tersisa: <span id="hintCount">3</span>)</button>
      <button class="button" onclick="checkAnswers()">Selesai</button>
      <button class="button" onclick="resetGrid()">Reset</button>
      <button class="button" onclick="showScreen('startScreen')">Back</button>
    </div>
    <p id="timer">Waktu: 180</p>
  </div>

  <div id="resultScreen" class="screen">
    <h2>Hasil Permainan</h2>
    <p id="score"></p>
    <button class="button" onclick="startGame()">Main Lagi</button>
    <button class="button" onclick="showScreen('startScreen')">Kembali ke Menu</button>
  </div>

  <script>
    let correctAnswers = {
      '0': 'A', '1': 'S', '2': 'A', '3': 'M',
      '6': 'B', '12': 'A', '18': 'S', '24': 'A',
      '30': 'P', '31': 'H', '32': 'M', '33': 'E', '34': 'T', '35': 'E', '36': 'R',
      '40': 'S', '41': 'K', '42': 'A', '43': 'L', '44': 'A', '45': 'P', '46': 'H',
      '50': 'G', '51': 'A', '52': 'R', '53': 'A', '54': 'M'
    };

    let hintCount = 3;
    let timerInterval;
    let timeLeft = 180;

    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function startGame() {
      showScreen('gameScreen');
      hintCount = 3;
      document.getElementById('hintCount').textContent = hintCount;
      timeLeft = 180;
      document.getElementById('timer').textContent = 'Waktu: ' + timeLeft;
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = 'Waktu: ' + timeLeft;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          checkAnswers();
        }
      }, 1000);
      createGrid();
    }

    function createGrid() {
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      for (let i = 0; i < 6 * 6; i++) {
        const input = document.createElement('input');
        input.maxLength = 1;
        input.className = 'cell';
        input.id = 'cell' + i;
        grid.appendChild(input);
      }
    }

    function checkAnswers() {
      let correct = 0;
      for (let i in correctAnswers) {
        const input = document.getElementById('cell' + i);
        if (!input) continue;
        if (input.value.toUpperCase() === correctAnswers[i]) {
          input.classList.add('correct');
          correct++;
        } else {
          input.classList.add('incorrect');
        }
      }
      clearInterval(timerInterval);
      const score = correct * 10 + timeLeft;
      document.getElementById('score').textContent = `Skor Anda: ${score} (Benar: ${correct}, Bonus waktu: ${timeLeft})`;
      showScreen('resultScreen');
    }

    function resetGrid() {
      document.querySelectorAll('.cell').forEach(cell => {
        cell.value = '';
        cell.classList.remove('correct', 'incorrect');
      });
    }

    function useHint() {
      if (hintCount <= 0) return;
      for (let i in correctAnswers) {
        const input = document.getElementById('cell' + i);
        if (input && input.value === '') {
          input.value = correctAnswers[i];
          hintCount--;
          document.getElementById('hintCount').textContent = hintCount;
          return;
        }
      }
    }
  </script>
</body>
</html>